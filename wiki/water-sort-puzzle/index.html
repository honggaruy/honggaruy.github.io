<!DOCTYPE html>
<html>
    <head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Water Sort Puzzle 풀이 알고리즘 - 홍가뤼의 개인위키</title>

    <meta name="description" content="">

    <link rel="stylesheet" href="/css/main.css">
    <link rel="canonical" href="https://honggaruy.github.io/wiki/water-sort-puzzle/">
    <link rel="alternate" type="application/rss+xml" title="홍가뤼의 개인위키" href="https://honggaruy.github.io/feed.xml">

    <meta property="og:type" content="website">
    <meta property="og:title" content="Water Sort Puzzle 풀이 알고리즘">
    <meta property="og:description" content="">
    <meta property="og:image" content="https://honggaruy.github.io/resources/icon/apple-touch-icon.png">
    <meta property="og:url" content="https://honggaruy.github.io/wiki/water-sort-puzzle/">

    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="@">
    <meta name="twitter:url" content="https://honggaruy.github.io/wiki/water-sort-puzzle/">
    <meta name="twitter:title" content="Water Sort Puzzle 풀이 알고리즘">
    <meta name="twitter:description" content="">

    <link rel="apple-touch-icon" sizes="180x180" href="/resources/icon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/resources/icon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/resources/icon/favicon-16x16.png">
    <link rel="manifest" href="/resources/icon/site.webmanifest">




<script>MathJax={"tex":{"inlineMath":[["$","$"],["\\(","\\)"]],"displayMath":[["$$","$$"],["\\[","\\]"]]},"svg":{"fontCache":"global"}}</script><script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script><script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
</head>
<body>
<header class="header">
    <div>
        <a class="site-title" href="/">홍가뤼의 개인위키</a>
    </div>
    <div>
        <a class="site-title-right" href="/about/">me</a>
    </div>
    <div>
        <a class="site-title-right" href="/wiki/index/#random" onclick="if(typeof random === 'function')random()">random</a>
    </div>
    <div>
        <a class="site-title-right" href="/blog/">blog</a>
    </div>
    <div>
        <a class="site-title-right" href="/wiki/index/">wiki</a>
    </div>
</header>

    
        <div class="page-content">
            <div class="search">
    <form role="search" method="get" action="/search/">
         <input name="searchString" class="searchInput" placeholder=" 검색하세요" type="text">
         <input type="submit" class="searchButton" value="Search">
    </form>
</div>
            <div class="post">
                
<input type="hidden" id="thisName" value="water-sort-puzzle">
<div class="post">
    <header class="post-header">
        <h1 class="post-title">Water Sort Puzzle 풀이 알고리즘</h1>
    
        <div class="history-button">
            <p><a href="https://github.com/honggaruy/honggaruy.github.io/blame/master/_wiki/water-sort-puzzle.md" target="_blank">created: 2021.10.09</a></p>
            <p><a href="https://github.com/honggaruy/honggaruy.github.io/blame/master/_wiki/water-sort-puzzle.md" target="_blank">updated: 2021.10.11</a></p>
            <p>
                <a href="https://github.com/honggaruy/honggaruy.github.io/edit/master/_wiki/water-sort-puzzle.md">편집하기</a>
                
                /
                <a href="https://github.com/honggaruy/honggaruy.github.io/issues/new?title=Water+Sort+Puzzle+%ED%92%80%EC%9D%B4+%EC%95%8C%EA%B3%A0%EB%A6%AC%EC%A6%98&amp;body=%EC%9D%98%EA%B2%AC%EC%9D%84%20%EB%82%A8%EA%B2%A8%EC%A3%BC%EC%84%B8%EC%9A%94">의견 남기기</a>
                
            </p>
        </div>
        <div id="parent-list"></div>


    <div class="post-tag">
    puzzle algorithm water-sort
</div>




    </header>
    <article class="post-content">
        <ul id="markdown-toc">
  <li><a href="#%EA%B4%80%EB%A0%A8%EC%9E%90%EB%A3%8C" id="markdown-toc-관련자료">관련자료</a></li>
  <li>
<a href="#%EB%AC%B8%EC%A0%9C-%EB%AA%A8%EB%8D%B8%EB%A7%81" id="markdown-toc-문제-모델링">문제 모델링</a>    <ul>
      <li><a href="#input" id="markdown-toc-input">Input</a></li>
      <li><a href="#output" id="markdown-toc-output">Output</a></li>
    </ul>
  </li>
</ul>

<h1 id="관련자료">관련자료</h1>

<ul>
  <li>water sort puzzle 이란 모바일 게임이 있는데 해결하는 코드를 작성하고 싶다</li>
  <li><a href="https://www.codechef.com/problems/WTRSORT">Water Sort Puzzle</a></li>
  <li>
<a href="https://levelsolved.com/water-sort-puzzle-level-50-solution/">Water sort puzzel level 50 solution, Levelsolved</a> : 해답나와 있는 사이트</li>
  <li>
<a href="https://github.com/kuking/WaterSortPuzzleSolver">WaterSortPuzzleSover, github</a> : github 코드 , Go 언어</li>
  <li>
<a href="https://github.com/discorev/colour-puzzle-solver">Colour Sort Solver, github</a> : github 코드, python 언어
    <ul>
      <li>처음에 주어진 패턴에 따라  <a href="https://en.wikipedia.org/wiki/Breadth-first_search">BFS, Breadth-first search</a> 혹은 <a href="https://en.wikipedia.org/wiki/Depth-first_search">DFS, Depth-first search</a> 를 쓸 수 있다고 한다</li>
    </ul>
  </li>
  <li>
<a href="https://www.codechef.com/problems/WTRSORT">Water Sort Puzzle, codechef</a> : 워터 소트 퍼즐을 이론적으로 분석</li>
</ul>

<h1 id="문제-모델링">문제 모델링</h1>

<ul>
  <li>참고 : <a href="https://www.codechef.com/problems/WTRSORT">Water Sort Puzzle, codechef</a>
</li>
  <li>연구원이 서로 다른 색상의 비혼화성 시약 샘플간의 반응을 연구하려고 한다</li>
  <li>컬러는 $N$ 가지가 있다 ($1$ 부터 $N$ 까지 번호가 매겨져 있다)</li>
  <li>연구원은 $N + 2$ 개의 test tube를 가지고 있다 ( $1$ 부터 $N + 2$ 까지 번호가 달린다)
    <ul>
      <li>각각의 tube는 $M$ ml 까지 담을 수 있다</li>
      <li>처음에는 $N + 1$ 과 $N + 2$ tube는 비어있다</li>
      <li>그리고 각 $i$ 번째 tube ($1 \leq i \leq N$ ) 는 임의의 colour들의 시약  $M$ ml로 완전히 채워져 있다</li>
    </ul>
  </li>
  <li>시약끼리는 서로 섞이지 않기 때문에
    <ul>
      <li>$i$ 번째 튜브의 내용은 튜브 바닥부터 머리까지 $B_i,_1, B_i,_2,\ldots,B_i,_M$의 시퀀스로 묘사할 수 있다</li>
      <li>즉, 각각의 유효한 $j$에 대해, $i$번째 튜브의 튜브 바닥으로부터 $j$번째 밀리리터 부피의 시약은 $B_i,_j$ color 의 시약으로 채워진것이다.</li>
      <li>각 시약의 초기 부피는 $M$ ml와 같다</li>
    </ul>
  </li>
  <li>연구의 편의를 위해, 연구원은 시약을 색상에 따라 재분류 하고자 한다
    <ul>
      <li>즉, 최종적으로는 각각의 colour $i$는 색상에 따라 한 개의 tube를 $M$ ml 채워야 하며, 그 튜브에 다른 colour는 없어야 한다</li>
      <li>빈 tube나 시약의 위치는 어디든지 상관이 없다</li>
    </ul>
  </li>
  <li>이 작업을 성공하기 위해, 처음에 몇 개의 ( 하나도 아니거나 혹은 모든 ) 튜브의 시약 순서를 반대로 할 수도 있다 ( 역자주 : 안드로이드 게임에서 reverse 기능은 없었음)
    <ul>
      <li>이 때, 두 가지 작업을 수행할 수 있다</li>
    </ul>
  </li>
</ul>

<ol>
  <li>두 개의 테스트 tube $P$와 $Q$를 선택하고 tube $P$의 가장 위의 시약 1 ml를 tube $Q$의 top으로 옮긴다
    <ul>
      <li>이것은 $P$가 비어있지 않고 $Q$가 full이 아닐 때만 허용된다</li>
      <li>$Q$가 비어있으면, 이 작업의 비용은 0이다</li>
      <li>위의 경우가 아닐때, 시약 $P$의 가장 꼭대기의 colour를 $U$라고 하고, (이 작업하기 전의) 시약 $Q$의 꼭대기 colour를 $V$라고 하자.</li>
    </ul>
    <ul>
      <li>만약 $D_U,_V = -1$ 이면, 이 작업은 허용되지 않는다. 이 경우가 아니라면 이 작업이 허용되며 비용은 $D_U,_V$가 된다</li>
    </ul>
  </li>
  <li>테스트 tube $P$를 선택하고 여유 용량을 $1$ ml 증가 시킨다. 이 작업의 비용은 $C_P$라고 한다</li>
</ol>

<ul>
  <li>시약을 다른 튜브의 가장 위에 붇는 비용과 어느 시약이 서로 반응하는지에 대한 정보를 제공받을 것이다
    <ul>
      <li>그러므로, 서로의 튜브 위에는 부을수 없다</li>
      <li>즉, 행렬 $D$가 있다고 하자. 각각의 유효한 $i$와 $j$에 대해 $D_i,_j = D_j,_i$ 임과 각각의 유효한 $i$에 대해 $D_i,_i =0$ 임이 보증된다</li>
      <li>(역자주: 이 부분은 잘 이해가 안 됨)</li>
    </ul>
  </li>
  <li>당신은 $2^{20} = 1,048,576$ 번의 이하의 작업으로 ( 위 에서 묘사한 상태의) 시약 분리를 완성해야 합니다</li>
  <li>이 상태를 달성하기 위한 작업 비용의 합은 가능한 최소한의 비용이 되어야 합니다</li>
</ul>

<hr>

<h2 id="input">Input</h2>

<ul>
  <li>첫번째 line은 빈 칸으로 분리된 두 개의 정수 $N$ 과 $M$을 포함한다</li>
  <li>두번째 line은 빈 칸으로 분리된 $N + 2$ 개의 정수 $C_1,C_2,\ldots,C_{N+2}$를 포함한다</li>
  <li>$N$ 개의 line이 따라온다. 각각 유효한 $i$에 대해, $i$ 번째 line은 빈 칸으로 분리된 $N$개의 정수 $D_i,_1,D_i,_2,\ldots,D_i,_N$을 포함한다</li>
  <li>$N$ 개의 추가적인 line들이 뒤따른다. 각각 유효한 $i$에 대해, $i$ 번째 line은 빈 칸으로 분리된 $M$개의 정수 $B_{i,1},B_{i,2},\ldots,B_{i,M}$을 포함한다</li>
</ul>

<hr>

<h2 id="output">Output</h2>

<ul>
  <li>첫번째 줄은, 빈 칸으로 분리된 두개의 정수 $X$와 $Y$($0 \leq X \leq N, 0 \leq Y \leq 2^{20}$)를 프린트하라
    <ul>
      <li>각각의 의미는 당신이 뒤집어야 하는 튜브의 갯수와 당신이 수행하길 바라는 작업의 횟수이다</li>
    </ul>
  </li>
  <li>다음 줄은, 빈 칸으로 분리된 $X$개의 정수 $A_1,A_2,\ldots,A_X$를 프린트하라
    <ul>
      <li>각각은 당신이 뒤집어야 하는 테스트 튜브의 번호이다 ( 유효한 $i$에 대해 $1 \leq A_i \leq N$을 만족)</li>
    </ul>
  </li>
</ul>

    </article>


    
    <div class="post-comments">
    
    
        <script src="https://utteranc.es/client.js" repo="honggaruy/honggaruy.github.io" issue-term="pathname" label="Comment" theme="github-light" crossorigin="anonymous" async>
        </script>
    
    </div>




</div>
<script>
    ;(function() {
        var tags = document.querySelectorAll('.post-tag');
        if(tags == null || tags.length < 1) {
            return;
        }

        for (var i = 0; i < tags.length; i++) {
            var item = tags[i];
            var tagList = item.innerHTML.trim();

            if(/^\s*$/.test(tagList)) {
                continue;
            }
            tagList = tagList.split(/\s+/)
                .map(function(tag) {
                    return `<a href="/tag/#${tag}">#${tag}</a>`;
                })
                .join(' ');
            tags[i].innerHTML = tagList;
        }
        return;
    })();
    ;(function() {
        var post = document.querySelector('article.post-content');

        if(post == null) {
            return;
        }

        (function iterate_node(node) {

            if (/^(?:p|ul|h\d|table)$/i.test(node.tagName)) {

                node.innerHTML = link(node.innerHTML);

            } else { // Node.ELEMENT_NODE
                for (var i = 0; i < node.childNodes.length; i++) {
                    iterate_node(node.childNodes[i]);
                }
            }
        })(post);

        function link(content) {
            content = content.replace(/\\\[\[(.+?)\]\]/g, '\\[\\[$1\\]\\]');
            content = content.replace(/\[\[(.+?)\]\]\{(.+?)\}/g, '<a href="../$1">$2</a>');
            content = content.replace(/\[\[(.+?)\]\]/g, '<a href="../$1">$1</a>');
            content = content.replace(/\\\[\\\[(.+?)\\\]\\\]/g, '[[$1]]');
            return content;
        }

    })();
</script>


<script src="/js/axios.min.js"></script>
<script async src="/js/parent.js"></script>

            </div>
        </div>
        <footer class="footer">
    <div>

    </div>
</footer>
    
</body>
</html>
