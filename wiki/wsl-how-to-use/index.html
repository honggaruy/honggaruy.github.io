<!DOCTYPE html>
<html>
    <head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>WSL 사용하기 - 홍가뤼의 개인위키</title>

    <meta name="description" content="WSL을 오래간만에 사용할 때 보기">

    <link rel="stylesheet" href="/css/main.css">
    <link rel="canonical" href="https://honggaruy.github.io/wiki/wsl-how-to-use/">
    <link rel="alternate" type="application/rss+xml" title="홍가뤼의 개인위키" href="https://honggaruy.github.io/feed.xml">

    <meta property="og:type" content="website">
    <meta property="og:title" content="WSL 사용하기">
    <meta property="og:description" content="WSL을 오래간만에 사용할 때 보기">
    <meta property="og:image" content="https://honggaruy.github.io/resources/icon/apple-touch-icon.png">
    <meta property="og:url" content="https://honggaruy.github.io/wiki/wsl-how-to-use/">

    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="@">
    <meta name="twitter:url" content="https://honggaruy.github.io/wiki/wsl-how-to-use/">
    <meta name="twitter:title" content="WSL 사용하기">
    <meta name="twitter:description" content="WSL을 오래간만에 사용할 때 보기">

    <link rel="apple-touch-icon" sizes="180x180" href="/resources/icon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/resources/icon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/resources/icon/favicon-16x16.png">
    <link rel="manifest" href="/resources/icon/site.webmanifest">

    <!-- https://fontawesome.com/kits/a86e231b11/use 참고 -->
    <script src="https://kit.fontawesome.com/a86e231b11.js" crossorigin="anonymous"></script>




</head>
<body>
<header class="header">
    <div>
        <a class="site-title" href="/">홍가뤼의 개인위키</a>
    </div>
    <div>
        <a class="site-title-right" href="/about/">me</a>
    </div>
    <div>
        <a class="site-title-right" href="/wiki/index/#random" onclick="if(typeof random === 'function')random()">random</a>
    </div>
    <div>
        <a class="site-title-right" href="/blog/">blog</a>
    </div>
    <div>
        <a class="site-title-right" href="/wiki/index/">wiki</a>
    </div>
</header>

    
        <div class="page-content">
            <div class="search">
    <form role="search" method="get" action="/search/">
         <input name="searchString" class="searchInput" placeholder=" 검색하세요" type="text">
         <input type="submit" class="searchButton" value="Search">
    </form>
</div>
            <div class="post">
                
<input type="hidden" id="thisName" value="wsl-how-to-use">
<div class="post">
    <header class="post-header">
        <h1 class="post-title">WSL 사용하기</h1>
    
        <p class="title-summary">WSL을 오래간만에 사용할 때 보기</p>
    
        <div class="history-button">
            <p><a href="https://github.com/honggaruy/honggaruy.github.io/blame/master/_wiki/wsl-how-to-use.md" target="_blank">created: 2022.01.17</a></p>
            <p><a href="https://github.com/honggaruy/honggaruy.github.io/blame/master/_wiki/wsl-how-to-use.md" target="_blank">updated: 2023.11.01</a></p>
            <p>
                <a href="https://github.com/honggaruy/honggaruy.github.io/edit/master/_wiki/wsl-how-to-use.md">편집하기</a>
                
                /
                <a href="https://github.com/honggaruy/honggaruy.github.io/issues/new?title=WSL+%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0&amp;body=%EC%9D%98%EA%B2%AC%EC%9D%84%20%EB%82%A8%EA%B2%A8%EC%A3%BC%EC%84%B8%EC%9A%94">의견 남기기</a>
                
            </p>
        </div>
        <div id="parent-list"></div>


    <div class="post-tag">
    linux wsl wsl2
</div>




    </header>
    <article class="post-content">
        <ul id="markdown-toc">
  <li>
<a href="#%EA%B0%9C%EC%9A%94" id="markdown-toc-개요">개요</a>    <ul>
      <li><a href="#%EA%B4%80%EB%A0%A8-%EB%A7%81%ED%81%AC" id="markdown-toc-관련-링크">관련 링크</a></li>
    </ul>
  </li>
  <li>
<a href="#%EA%B8%B0%EB%B3%B8" id="markdown-toc-기본">기본</a>    <ul>
      <li><a href="#distro-%EB%AA%A9%EB%A1%9D-%EB%B3%B4%EA%B8%B0" id="markdown-toc-distro-목록-보기">Distro 목록 보기</a></li>
      <li><a href="#%EA%B8%B0%EB%B3%B8-%EB%AA%85%EB%A0%B9" id="markdown-toc-기본-명령">기본 명령</a></li>
    </ul>
  </li>
  <li>
<a href="#%EC%84%A4%EC%A0%95" id="markdown-toc-설정">설정</a>    <ul>
      <li><a href="#wsl%EC%9D%98-%EA%B3%A0%EA%B8%89-%EC%84%A4%EC%A0%95-%EA%B5%AC%EC%84%B1" id="markdown-toc-wsl의-고급-설정-구성">WSL의 고급 설정 구성</a></li>
      <li>
<a href="#wsl2-%EC%97%90%EC%84%9C-c-%ED%99%98%EA%B2%BD%EC%84%A4%EC%A0%95-%ED%95%98%EA%B8%B0" id="markdown-toc-wsl2-에서-c-환경설정-하기">WSL2 에서 C++ 환경설정 하기</a>        <ul>
          <li><a href="#%EA%B4%80%EB%A0%A8-%EB%A7%81%ED%81%AC-1" id="markdown-toc-관련-링크-1">관련 링크</a></li>
          <li><a href="#%ED%98%84%EC%9E%AC-%ED%99%98%EA%B2%BD" id="markdown-toc-현재-환경">현재 환경</a></li>
          <li><a href="#%EC%B5%9C%EC%8B%A0-%EB%B2%84%EC%A0%84-%EC%97%85%EB%8D%B0%EC%9D%B4%ED%8A%B8" id="markdown-toc-최신-버전-업데이트">최신 버전 업데이트</a></li>
          <li><a href="#run-vs-code-in-wsl" id="markdown-toc-run-vs-code-in-wsl">Run VS Code in WSL</a></li>
          <li><a href="#%ED%95%84%EC%88%98-vscode-%ED%99%95%EC%9E%A5" id="markdown-toc-필수-vscode-확장">필수 VSCode 확장</a></li>
        </ul>
      </li>
      <li>
<a href="#wsl2-ubuntu%EC%97%90-zsh-%EC%84%A4%EC%B9%98%ED%95%B4%EC%84%9C-%ED%84%B0%EB%AF%B8%EB%84%90-%EA%BE%B8%EB%AF%B8%EA%B8%B0" id="markdown-toc-wsl2-ubuntu에-zsh-설치해서-터미널-꾸미기">WSL2 Ubuntu에 ZSH 설치해서 터미널 꾸미기</a>        <ul>
          <li><a href="#zsh-%EC%84%A4%EC%B9%98" id="markdown-toc-zsh-설치">zsh 설치</a></li>
        </ul>
      </li>
      <li><a href="#wsl2%EC%97%90%EC%84%9C-2004-%EB%B2%84%EC%A0%84%EC%9D%84-2204-lts-%EB%B2%84%EC%A0%84%EC%9C%BC%EB%A1%9C-%EC%97%85%EA%B7%B8%EB%A0%88%EC%9D%B4%EB%93%9C-%ED%95%98%EA%B8%B0" id="markdown-toc-wsl2에서-2004-버전을-2204-lts-버전으로-업그레이드-하기">WSL2에서 20.04 버전을 22.04 LTS 버전으로 업그레이드 하기</a></li>
    </ul>
  </li>
  <li>
<a href="#troubleshooting" id="markdown-toc-troubleshooting">troubleshooting</a>    <ul>
      <li>
<a href="#case-1--%EC%9D%B8%ED%84%B0%EB%84%B7-%EA%B4%80%EB%A0%A8-%EB%AA%85%EB%A0%B9%EC%A4%91-unable-to-resolve--%EB%AC%B8%EC%A0%9C" id="markdown-toc-case-1--인터넷-관련-명령중-unable-to-resolve--문제">Case 1 : 인터넷 관련 명령중 <code class="language-html highlighter-rouge">unable to resolve ...</code> 문제</a>        <ul>
          <li><a href="#%EC%A6%9D%EC%83%81" id="markdown-toc-증상">증상</a></li>
          <li><a href="#%EA%B4%80%EB%A0%A8-%EB%A7%81%ED%81%AC-2" id="markdown-toc-관련-링크-2">관련 링크</a></li>
          <li><a href="#%EC%84%A4%EB%AA%85" id="markdown-toc-설명">설명</a></li>
        </ul>
      </li>
      <li><a href="#case-2--sudo-systemctl-start-nginx-%EB%AA%85%EB%A0%B9%EC%9D%84-%EC%A3%BC%EB%A9%B4-%EB%8B%A4%EC%9D%8C-%EC%97%90%EB%9F%AC%EA%B0%80-%EB%9C%AC%EB%8B%A4" id="markdown-toc-case-2--sudo-systemctl-start-nginx-명령을-주면-다음-에러가-뜬다">Case 2 : <code class="language-html highlighter-rouge">sudo systemctl start nginx</code> 명령을 주면 다음 에러가 뜬다</a></li>
      <li><a href="#case-3-" id="markdown-toc-case-3-">Case 3 :</a></li>
    </ul>
  </li>
</ul>

<h1 id="개요">개요</h1>

<h2 id="관련-링크">관련 링크</h2>

<ul>
  <li>
<a href="https://docs.microsoft.com/en-us/windows/wsl/">WSL 마소 공식문서 홈</a>
    <ul>
      <li>
<a href="https://docs.microsoft.com/en-us/windows/wsl/setup/environment">Set up a WSL development environment</a> : 중요문서</li>
    </ul>
  </li>
</ul>

<h1 id="기본">기본</h1>

<h2 id="distro-목록-보기">Distro 목록 보기</h2>

<ul>
  <li>
<code class="language-html highlighter-rouge">distro</code>의 뜻 : <a href="https://ko.wikipedia.org/wiki/%EB%A6%AC%EB%88%85%EC%8A%A4_%EB%B0%B0%ED%8F%AC%ED%8C%90">리눅스 배포판, 위키백과</a>
</li>
  <li>관련 링크 : <a href="https://winaero.com/list-available-wsl-linux-distros-windows-10/">List Available WSL Linux Distors in Windows 10</a>
</li>
  <li>모든 Distro 목록 보기
    <blockquote>
      <p>wsl –list –all
혹은 wsl -l –all</p>
    </blockquote>
  </li>
  <li>현재 실행중인 distro 목록 보기
    <blockquote>
      <p>wsl –list –running (혹은 wsl -l –running)</p>
    </blockquote>
  </li>
  <li>2022-01-17 현재 running 중인 my distro name
    <ul>
      <li><code class="language-html highlighter-rouge">Ubuntu-20.04</code></li>
    </ul>
  </li>
</ul>

<h2 id="기본-명령">기본 명령</h2>

<ul>
  <li>Ubuntu package 목록을 업데이트 하라
    <ul>
      <li>업데이트 명령
        <div class="language-sh highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
</pre></td>
<td class="rouge-code"><pre><span class="o">&gt;</span> <span class="nb">sudo </span>apt-get update
</pre></td>
</tr></tbody></table></code></pre></div>        </div>
      </li>
      <li>업데이트 안 된 distro 은 새로운 패키지를 설치하려할 때 문제가 생길수 있으므로 처음에, 또는 수시로 업데이트 한다</li>
    </ul>
  </li>
</ul>

<h1 id="설정">설정</h1>

<h2 id="wsl의-고급-설정-구성">WSL의 고급 설정 구성</h2>

<ul>
  <li>관련 링크 : <a href="https://docs.microsoft.com/ko-kr/windows/wsl/wsl-config">WSL의 고급 설정 구성</a>
</li>
  <li>wsl.conf 설정하는 법</li>
</ul>

<h2 id="wsl2-에서-c-환경설정-하기">WSL2 에서 C++ 환경설정 하기</h2>

<h3 id="관련-링크-1">관련 링크</h3>

<ul>
  <li>⭐⭐<a href="https://code.visualstudio.com/docs/cpp/config-wsl">Using C++ and WSL in VS Code, visual Studio Code Doc</a>
</li>
  <li><a href="https://skyqnaqna.tistory.com/entry/VS-Code%EC%97%90%EC%84%9C-WSL-2%EC%99%80-C-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0">VS Code에서 WSL2와 C++ 환경설정 하기, 개인블로그</a></li>
  <li><a href="https://woowaa.net/102">gcc/g++ 설치하기, woowaa.net</a></li>
  <li>
<a href="https://gcc.gnu.org/">gcc 배포 이력, gcc.gnu.org</a> : 2022-01-17 현재 최종 버전은 GCC 11.2 ( 내가 쓰는 WSL2 최종 버전은  gcc 9.3 )</li>
</ul>

<h3 id="현재-환경">현재 환경</h3>

<ul>
  <li>모든 소스코드와 compiler는 WSL내에서 hosting하지만</li>
  <li>windows상의 VS Code 와 그의 확장들 ( Remote - WSL, 디버거 등등)을 사용함</li>
  <li>결론 -  VS Code x WSL2 환경, VS Code 확장으로 intellisense, 빌드및 디버깅 모두 가능함</li>
  <li>이 환경에 대한 자세한 설명은 <a href="https://code.visualstudio.com/docs/remote/remote-overview">VS Code Remote Development</a> 를 참조</li>
</ul>

<h3 id="최신-버전-업데이트">최신 버전 업데이트</h3>

<ul>
  <li>
<a href="https://linuxize.com/post/how-to-install-gcc-on-ubuntu-20-04/#installing-gcc-on-ubuntu-2004">Install GCC on Ubuntu 20.04</a>
    <ul>
      <li>명령
        <div class="language-sh highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td>
<td class="rouge-code"><pre><span class="o">&gt;</span> <span class="nb">sudo </span>apt update
<span class="o">&gt;</span> <span class="nb">sudo </span>apt <span class="nb">install </span>build-essential gdb
</pre></td>
</tr></tbody></table></code></pre></div>        </div>
      </li>
      <li>위 명령은 <code class="language-html highlighter-rouge">gcc</code>,<code class="language-html highlighter-rouge">g++</code>, <code class="language-html highlighter-rouge">make</code>등 많은 패키지를 한 번에 설치한다</li>
      <li>2022-01-17 현재 최신버전은 다음과 같다
        <ul>
          <li>build-essential - <code class="language-html highlighter-rouge">12.8ubuntu1.1</code>
</li>
          <li>gdb - <code class="language-html highlighter-rouge">9.2-0ubuntu1~20.04</code>
</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<h3 id="run-vs-code-in-wsl"><a href="https://code.visualstudio.com/docs/cpp/config-wsl#_run-vs-code-in-wsl">Run VS Code in WSL</a></h3>

<ul>
  <li>WSL 상의 cpp project 폴더에서 <code class="language-html highlighter-rouge">code .</code> 명령을 수행한다
    <ul>
      <li>
<strong>“installing VS Code Server”</strong> 메시지가 보인다
        <ul>
          <li>VS Code가 Linux side에서 작은 서버를 다운로드해서 설치하고 데스크탑 side의 VS Code가 대화하기 시작한다</li>
          <li>VS Code는 해당 cpp project 폴더를 열고
            <ul>
              <li>VS Code 상의 <code class="language-html highlighter-rouge">File Explorer</code>는 VS Code가 <code class="language-html highlighter-rouge">WSL context</code>상에서 실행된다는 표시를 보여준다
                <ul>
                  <li>title bar 에서 <code class="language-html highlighter-rouge">[WSL: Ubuntu-20.04]</code>를 볼 수 있다</li>
                </ul>
              </li>
              <li>VS Code 상의 <code class="language-html highlighter-rouge">status bar</code>에서도 <code class="language-html highlighter-rouge">[WSL: Ubuntu-20.04]</code>표시를 볼 수 있다</li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li>제목의 링크에서 알려주는 필수 VS Code 확장을 깔고 튜토리얼을 따라해보면 <code class="language-html highlighter-rouge">.vscode</code>폴더내에 다음의 파일이 자동으로 생성된다
    <ul>
      <li>
<code class="language-html highlighter-rouge">c_cpp_properties.json</code> : compiler 경로와 IntelliSense 설정</li>
      <li>
<code class="language-html highlighter-rouge">tasks.json</code> : build instructions (make 파일과 비슷)</li>
      <li>
<code class="language-html highlighter-rouge">launch.json</code> : 디버거 설정</li>
    </ul>
  </li>
</ul>

<style>
.reddish { color:#d50000; background:#fce8e6;}
.bluish { color:#01579b; background:#e1f5fe;}
</style>

<ul>
  <li>
<code class="language-html highlighter-rouge">tasks.json</code> 파일의 구성
    <ul>
      <li>VS Code에서 <code class="language-html highlighter-rouge">Terminal &gt; Configure Default Build Task</code> 명령을 줄때 자동으로 생성</li>
      <li>
        <p>내용</p>

        <div class="language-json highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
</pre></td>
<td class="rouge-code"><pre><span class="p">{</span><span class="w">
  </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"tasks"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"shell"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"g++ build active file"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"command"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/usr/bin/g++"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"args"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"-g"</span><span class="p">,</span><span class="w"> </span><span class="s2">"${file}"</span><span class="p">,</span><span class="w"> </span><span class="s2">"-o"</span><span class="p">,</span><span class="w"> </span><span class="s2">"${fileDirname}/${fileBasenameNoExtension}"</span><span class="p">],</span><span class="w">
      </span><span class="nl">"options"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"cwd"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/usr/bin"</span><span class="w">
        </span><span class="p">},</span><span class="w">
      </span><span class="nl">"problemMatcher"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"$gcc"</span><span class="p">],</span><span class="w">
      </span><span class="nl">"group"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"kind"</span><span class="p">:</span><span class="w"> </span><span class="s2">"build"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"isDefault"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre></td>
</tr></tbody></table></code></pre></div>        </div>

        <ul>
          <li>
<code class="language-html reddish highlighter-rouge">command</code> 설정 : 실행할 프로그램을 지정. 이 경우 <code class="language-html highlighter-rouge">g++</code>
</li>
          <li>
<code class="language-html reddish highlighter-rouge">args</code> 배열 : g++에 전달할 command-line arguments를 지정함</li>
          <li>이 arguments는 컴파일러가 기대하는 순서로 지정되어야 한다</li>
          <li>이 task는 g++ 에게 다음과 같이 지시한다
            <ul>
              <li>active file (<code class="language-html reddish highlighter-rouge">${file}</code>)을 가지고, 컴파일 해서,
                <ul>
                  <li>여기서 active file 이라는 것은
                    <ul>
                      <li>VS Code에서 <code class="language-html highlighter-rouge">Terminal &gt; Configure Default Build Task</code> 명령을 줄때</li>
                      <li>현재 VS Code Editor 상에서 보고있던 <code class="language-html highlighter-rouge">.cpp</code> 파일을 말함 (즉 현재 활성화된 파일)</li>
                    </ul>
                  </li>
                </ul>
              </li>
              <li>현재 디렉토리(<code class="language-html reddish highlighter-rouge">$(fileDirname}</code>)에</li>
              <li>active file 이름과 같은 실행파일을 만들지만</li>
              <li>확장자는 가지지 않도록(<code class="language-html reddish highlighter-rouge">${fileBasenameNoExtenstion}</code>)</li>
            </ul>
          </li>
          <li>결과적으로 <code class="language-html reddish highlighter-rouge">helloworld</code>라고 실행파일이 만들어진다 ( 소스코드 이름이 <code class="language-html reddish highlighter-rouge">helloworld.cpp</code> 일때)</li>
          <li>이 링크(<a href="https://code.visualstudio.com/docs/editor/variables-reference">variables reference</a>)를 통해 <code class="language-html highlighter-rouge">task.json</code>의 variables에 대해 자세히 알수 있다</li>
          <li>
<code class="language-html reddish highlighter-rouge">label</code> 값 : tasks 목록에서 보게될 제목이다. 아무렇게나 이름지어도 된다</li>
          <li>
<code class="language-html reddish highlighter-rouge">group</code> object의 <code class="language-html reddish highlighter-rouge">"isDefault": true</code> 값 : <code class="language-html bluish highlighter-rouge">Ctrl+Shift+B</code>(Build 명령)를 눌렀을때 이 task가 실행될 것이라는 것을 설정함
            <ul>
              <li>이 property는 편의적인 목적만 있음</li>
              <li>이 설정을 false로 두더라도 Terminal Menu의 <strong>Tasks: Run Build Task</strong>로 실행할 수 있다</li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li>Build한 것 실행하기
    <div class="language-sh highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td>
<td class="rouge-code"><pre><span class="o">&gt;</span> <span class="nb">ls
</span>helloworld helloworld.cpp
<span class="o">&gt;</span> ./helloworld
</pre></td>
</tr></tbody></table></code></pre></div>    </div>
  </li>
  <li>tasks.json 수정하기
    <ul>
      <li>
<code class="language-html reddish highlighter-rouge">tasks.json</code>를 수정하여 여러개의 C++ files</li>
    </ul>
  </li>
</ul>

<h3 id="필수-vscode-확장">필수 VSCode 확장</h3>

<ul>
  <li>
<a href="https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.remote-wsl">Remote - WSL</a> : Windows 상의 VS Code를 이용하여 linux application을 <code class="language-html highlighter-rouge">개발</code>하도록 지원.
    <ul>
      <li>Windows 환경의 생산성 그대로 linux에서 사용가능하다</li>
    </ul>
  </li>
</ul>

<h2 id="wsl2-ubuntu에-zsh-설치해서-터미널-꾸미기">WSL2 Ubuntu에 ZSH 설치해서 터미널 꾸미기</h2>

<ul>
  <li>원본 링크: <a href="https://llighter.github.io/install_zsh_in_wsl2/">WSL2 Ubuntu에 ZSH 설치해서 터미널 꾸미기, YUNHA INDUSTRIES 블로그</a>
</li>
</ul>

<h3 id="zsh-설치">zsh 설치</h3>

<ul>
  <li>
<code class="language-html highlighter-rouge">sudo apt install zsh</code> 로 설치
  <img src="https://llighter.github.io/install_zsh_in_wsl2/1.png" alt="">
</li>
  <li>기본 쉘을 zsh로 변경
    <ul>
      <li>현재 설정된 기본 쉘 확인
        <div class="language-sh highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td>
<td class="rouge-code"><pre>  <span class="nv">$ </span><span class="nb">echo</span> <span class="nv">$SHELL</span>
  /bin/bash             &lt;<span class="nt">--</span> 현재 bash가 기본 쉘임
</pre></td>
</tr></tbody></table></code></pre></div>        </div>
      </li>
      <li>기본 쉘 변경 명령
        <div class="language-sh highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
</pre></td>
<td class="rouge-code"><pre>  <span class="nv">$ </span>chsh <span class="nt">-s</span> <span class="si">$(</span>which zsh<span class="si">)</span>
</pre></td>
</tr></tbody></table></code></pre></div>        </div>
        <ul>
          <li>
<code class="language-html highlighter-rouge">which zsh</code>에서 <code class="language-html highlighter-rouge">which</code>는 <code class="language-html highlighter-rouge">zsh</code>의 경로와 파일명을 찾아서 반환한다</li>
          <li>바로 변경되지는 않고 탭을 닫았다가 다시 로그인 해야 변경된 기본 쉘이 반영된다
            <ul>
              <li>참고: <a href="https://unix.stackexchange.com/q/362894">Why am I not able to change the shell … from <i class="fa-brands fa-stack-overflow fa-xl"></i></a>
</li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li>oh my zsh 설치
    <ul>
      <li>
<a href="https://github.com/ohmyzsh/ohmyzsh">oh my zsh</a> 의 설치는 링크에 자세히 나와 있다
        <ul>
          <li><code class="language-html highlighter-rouge">sh -c "$(curl -fsSL https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)"</code></li>
        </ul>
      </li>
      <li>위 명령으로 설치를 하는데..
        <ul>
          <li>일단 <code class="language-html highlighter-rouge">sh -c</code> 명령에 대한 설명은 다음 링크를 참고하자 : <a href="https://askubuntu.com/a/831850">링크</a>
</li>
          <li>
<code class="language-html highlighter-rouge">sh -c</code> 명령을 다음에 오는 명령줄 문자열을 인터프리터식으로 실행하는 명령이다</li>
          <li>
<code class="language-html highlighter-rouge">sh</code>이 어떤 쉘로 연결되어 있는지는 <code class="language-html highlighter-rouge">readlink -e $(which sh)</code>을 실행하면 알수있는데 내 경우는 <code class="language-html highlighter-rouge">/usr/bin/dash</code>와 연결되어 있었고 일반적으로 <code class="language-html highlighter-rouge">dash</code>에 연결되어 있는듯하다</li>
          <li>왜 바로 <code class="language-html highlighter-rouge">curl</code> 명령을 호출하지 않고 이런식으로 <code class="language-html highlighter-rouge">dash</code>로 실행하는지는 잘 모르겠다</li>
        </ul>
      </li>
      <li>아래 그림과 같이 설치가 된다
  <img src="https://llighter.github.io/install_zsh_in_wsl2/4.png" alt="">
</li>
    </ul>
  </li>
  <li>하나씩 zsh 플러그인들을 설치하고 있는데 crlf 에러가 난다
    <ul>
      <li>윈도우에서 설정한 ~/.gitconfig을 wsl2에서도 같이 사용하고 있는데 autocrlf를 true로 설정하여 나는 에러이다</li>
      <li>늦은 시간이라 자야하므로 다음 링크를 이어서 읽어보자
        <ul>
          <li><a href="https://stackoverflow.com/q/2517190/9457247"> 링크1</a></li>
          <li><a href="https://stackoverflow.com/q/2332349/9457247"> 링크2</a></li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<h2 id="wsl2에서-2004-버전을-2204-lts-버전으로-업그레이드-하기">WSL2에서 20.04 버전을 22.04 LTS 버전으로 업그레이드 하기</h2>
<ul>
  <li>참고링크 : <a href="https://askubuntu.com/a/1428481">Upgrade ubuntu in WSL2 from 2004 to 22.04 의 선택된 답변, from <img src="https://cdn.sstatic.net/Sites/askubuntu/Img/logo.svg?v=7d56bc852bef" alt="" height="24px" style="background-color:#dc4616; padding:2px"></a>
</li>
  <li>TL;DR
    <div class="language-sh highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td>
<td class="rouge-code"><pre>  <span class="o">&gt;</span> <span class="nb">sudo </span>apt update <span class="o">&amp;&amp;</span> <span class="nb">sudo </span>apt full-upgrade
  <span class="c"># Window logout &amp; login</span>
  <span class="o">&gt;</span> <span class="nb">sudo </span><span class="k">do</span><span class="nt">-relese-upgrade</span>
</pre></td>
</tr></tbody></table></code></pre></div>    </div>
  </li>
</ul>

<h1 id="troubleshooting">troubleshooting</h1>

<h2 id="case-1--인터넷-관련-명령중-unable-to-resolve--문제">Case 1 : 인터넷 관련 명령중 <code class="language-html highlighter-rouge">unable to resolve ...</code> 문제</h2>

<h3 id="증상">증상</h3>

<ul>
  <li>WSL 소스 코드 디렉토리에서 <code class="language-html highlighter-rouge">code .</code> 누르면 VS Code Server에 접속하여 뭔가 download받는등 인터넷 접속을 하는데 안됨</li>
  <li>ping 도 안됨</li>
</ul>

<h3 id="관련-링크-2">관련 링크</h3>

<ul>
  <li><a href="https://thinmug.tistory.com/50">wget unable to resolve host address 문제 해결, 지식이 홀쑥</a></li>
  <li><a href="https://github.com/microsoft/WSL/issues/5256#issuecomment-666545999">WSL2 DNS issues 답변, github/WSL</a></li>
  <li><a href="https://xo.dev/wsl-could-not-resolve-hostname/">WSL - Could not resolve hostname, 테크블로그  ~/xo.dev</a></li>
</ul>

<h3 id="설명">설명</h3>

<ul>
  <li>wsl.conf가 없으면 대신 resolv.conf 가 자동 생성되어 사용되는데 재부팅이후 잘 동작하지 않게됨</li>
  <li>wsl.conf를 명시적으로 생성하여 제대로 설정하면 됨</li>
  <li>이후 /etc/resolv.conf 파일을 수정하여 DNS 설정을 변경
    <div class="language-conf highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
</pre></td>
<td class="rouge-code"><pre><span class="n">nameserver</span> <span class="m">8</span>.<span class="m">8</span>.<span class="m">8</span>.<span class="m">8</span>
</pre></td>
</tr></tbody></table></code></pre></div>    </div>
  </li>
  <li>마지막으로 윈도우 터미널에서 <code class="language-html highlighter-rouge">wsl --shutdown</code> 명령어를 사용하여 wsl 인스턴스 종료후 다시 시작</li>
</ul>

<h2 id="case-2--sudo-systemctl-start-nginx-명령을-주면-다음-에러가-뜬다">Case 2 : <code class="language-html highlighter-rouge">sudo systemctl start nginx</code> 명령을 주면 다음 에러가 뜬다</h2>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td>
<td class="rouge-code"><pre>honggaruy@3950X-P600S:~<span class="nv">$ </span><span class="nb">sudo </span>systemctl start nginx
System has not been booted with systemd as init system <span class="o">(</span>PID 1<span class="o">)</span><span class="nb">.</span> Can<span class="s1">'t operate.
Failed to connect to bus: Host is down
</span></pre></td>
</tr></tbody></table></code></pre></div></div>
<ul>
  <li><a href="https://askubuntu.com/q/1379425">StackExchange / ask ubuntu 그룹의 질문</a></li>
  <li>답변요약 - 참고로 아래 두 답변의 답변자는 한 사람이다!
    <ul>
      <li>
<a href="https://askubuntu.com/a/1379567">선택된 답변 ( 2021.12.6 ) - 매우 길다</a>
        <ul>
          <li>Windows 에서는 <code class="language-html highlighter-rouge">systemctl</code> 명령이 동작하지 않음</li>
          <li>Short Answer
            <ul>
              <li>
<code class="language-html highlighter-rouge">systemctl</code>의 흔한 사용처는 service를 시작시키는 것이다.</li>
              <li>
<code class="language-html highlighter-rouge">Ubuntu in WSL</code>에서는 아래와 같이 대체할 수 있다
                <div class="language-sh highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
</pre></td>
<td class="rouge-code"><pre><span class="nv">$ </span><span class="nb">sudo </span>service &lt;service name&gt; start
</pre></td>
</tr></tbody></table></code></pre></div>                </div>
              </li>
            </ul>
          </li>
        </ul>
      </li>
      <li>
<a href="https://askubuntu.com/q/1379425">신규 WSL의 경우 ( 2022.09.22 )</a>
        <ul>
          <li>MS 공식 발표: <a href="https://devblogs.microsoft.com/commandline/systemd-support-is-now-available-in-wsl/">Systemd support is now available in WSL!</a>
</li>
          <li>의미: 일반적으로 <code class="language-html highlighter-rouge">Ubuntu in WSL</code>에서는 <code class="language-html highlighter-rouge">Systemd</code>가 필요하지 않지만, 이제는 선택할수 있는 옵션중 하나가 되었다</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<h2 id="case-3-">Case 3 :</h2>

    </article>


    
    <div class="post-comments">
    
    
        <script src="https://utteranc.es/client.js" repo="honggaruy/honggaruy.github.io" issue-term="pathname" label="Comment" theme="github-light" crossorigin="anonymous" async>
        </script>
    
    </div>




</div>
<script>
    ;(function() {
        var tags = document.querySelectorAll('.post-tag');
        if(tags == null || tags.length < 1) {
            return;
        }

        for (var i = 0; i < tags.length; i++) {
            var item = tags[i];
            var tagList = item.innerHTML.trim();

            if(/^\s*$/.test(tagList)) {
                continue;
            }
            tagList = tagList.split(/\s+/)
                .map(function(tag) {
                    return `<a href="/tag/#${tag}">#${tag}</a>`;
                })
                .join(' ');
            tags[i].innerHTML = tagList;
        }
        return;
    })();
    ;(function() {
        var post = document.querySelector('article.post-content');

        if(post == null) {
            return;
        }

        (function iterate_node(node) {

            if (/^(?:p|ul|h\d|table)$/i.test(node.tagName)) {

                node.innerHTML = link(node.innerHTML);

            } else { // Node.ELEMENT_NODE
                for (var i = 0; i < node.childNodes.length; i++) {
                    iterate_node(node.childNodes[i]);
                }
            }
        })(post);

        function link(content) {
            content = content.replace(/\\\[\[(.+?)\]\]/g, '\\[\\[$1\\]\\]');
            content = content.replace(/\[\[(.+?)\]\]\{(.+?)\}/g, '<a href="../$1">$2</a>');
            content = content.replace(/\[\[(.+?)\]\]/g, '<a href="../$1">$1</a>');
            content = content.replace(/\\\[\\\[(.+?)\\\]\\\]/g, '[[$1]]');
            return content;
        }

    })();
</script>


<script src="/js/axios.min.js"></script>
<script async src="/js/parent.js"></script>

            </div>
        </div>
        <footer class="footer">
    <div>

    </div>
</footer>
    
</body>
</html>
