<!DOCTYPE html>
<html>
    <head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>44주차 기록 - 홍가뤼의 개인위키</title>

    <meta name="description" content="10/26(월) ~ 11/01(일)">

    <link rel="stylesheet" href="/css/main.css">
    <link rel="canonical" href="https://honggaruy.github.io/blog/2020/10/26/week-44th/">
    <link rel="alternate" type="application/rss+xml" title="홍가뤼의 개인위키" href="https://honggaruy.github.io/feed.xml">

    <meta property="og:type" content="website">
    <meta property="og:title" content="44주차 기록">
    <meta property="og:description" content="10/26(월) ~ 11/01(일)">
    <meta property="og:image" content="https://honggaruy.github.io/resources/icon/apple-touch-icon.png">
    <meta property="og:url" content="https://honggaruy.github.io/blog/2020/10/26/week-44th/">

    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="@">
    <meta name="twitter:url" content="https://honggaruy.github.io/blog/2020/10/26/week-44th/">
    <meta name="twitter:title" content="44주차 기록">
    <meta name="twitter:description" content="10/26(월) ~ 11/01(일)">

    <link rel="apple-touch-icon" sizes="180x180" href="/resources/icon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/resources/icon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/resources/icon/favicon-16x16.png">
    <link rel="manifest" href="/resources/icon/site.webmanifest">




</head>
<body>
<header class="header">
    <div>
        <a class="site-title" href="/">홍가뤼의 개인위키</a>
    </div>
    <div>
        <a class="site-title-right" href="/about/">me</a>
    </div>
    <div>
        <a class="site-title-right" href="/wiki/index/#random" onclick="if(typeof random === 'function')random()">random</a>
    </div>
    <div>
        <a class="site-title-right" href="/blog/">blog</a>
    </div>
    <div>
        <a class="site-title-right" href="/wiki/index/">wiki</a>
    </div>
</header>

    
        <div class="page-content">
            <div class="search">
    <form role="search" method="get" action="/search/">
         <input name="searchString" class="searchInput" placeholder=" 검색하세요" type="text">
         <input type="submit" class="searchButton" value="Search">
    </form>
</div>
            <div class="post">
                <div class="post">
    <header class="post-header">

        <div class="PageNavigation">
          
            <a class="prev" href="/blog/2020/08/31/week-36th/">« 36주차 기록</a>
          
          
            <a class="next" href="/blog/2020/11/02/week-45th/">45주차 기록 »</a>
          
        </div>

        <h1 class="post-title blog-only-title">44주차 기록</h1>
        <p class="created-date">
            2020.10.26
        </p>


        <div class="post-tag">
    powershell wsl ubuntu update upgrade jekyll binding port
</div>

        <h2>10/26(월) ~ 11/01(일)</h2>
    </header>


    <div class="toc">
    </div>

    <article class="post-content">
        <ul id="markdown-toc">
  <li><a href="#%EC%9D%B4%EB%B2%88%EC%A3%BC-%EC%9E%91%EC%97%85-2020-10-31" id="markdown-toc-이번주-작업-2020-10-31">이번주 작업 (2020-10-31)</a></li>
  <li><a href="#%EC%9D%B4%EC%8A%88" id="markdown-toc-이슈">이슈</a></li>
  <li>
<a href="#wsl%EC%9D%B4-%EA%B0%91%EC%9E%90%EA%B8%B0-%EC%95%88%EB%90%98%EB%8A%94-%EB%AC%B8%EC%A0%9C-%ED%95%B4%EA%B2%B0-2020-11-01" id="markdown-toc-wsl이-갑자기-안되는-문제-해결-2020-11-01">WSL이 갑자기 안되는 문제 해결 (2020-11-01)</a>    <ul>
      <li><a href="#ubuntu-linux-%EC%B5%9C%EC%8B%A0%EB%B2%84%EC%A0%84%EC%9C%BC%EB%A1%9C-%EA%B0%B1%EC%8B%A0-2020-11-01" id="markdown-toc-ubuntu-linux-최신버전으로-갱신-2020-11-01">Ubuntu Linux 최신버전으로 갱신 (2020-11-01)</a></li>
    </ul>
  </li>
  <li>
<a href="#jekyll-serve-%EC%97%90%EB%9F%AC-2020-11-01" id="markdown-toc-jekyll-serve-에러-2020-11-01">Jekyll serve 에러 (2020-11-01)</a>    <ul>
      <li><a href="#jekyll-serve-%EA%B8%B0%EB%B3%B8-%ED%8F%AC%ED%8A%B8-%EC%84%A4%EC%A0%95%EC%9D%84-%EB%B0%94%EA%BE%B8%EB%8A%94-%EB%B2%95" id="markdown-toc-jekyll-serve-기본-포트-설정을-바꾸는-법">jekyll serve 기본 포트 설정을 바꾸는 법</a></li>
    </ul>
  </li>
</ul>

<h1 id="이번주-작업-2020-10-31">이번주 작업 (2020-10-31)</h1>

<ul>
  <li>dotfiles 복구 작업</li>
</ul>

<h1 id="이슈">이슈</h1>
<ul>
  <li>
<a href="https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.core/about/about_regular_expressions?view=powershell-7">PowerShell에서 Regualr Expression 사용하기</a>
    <ul>
      <li>PowerShell에서 escape 쓰는법</li>
      <li>
<a href="https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.core/about/about_regular_expressions?view=powershell-7#escaping-characters">참고 링크</a>
        <div class="language-sh highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td>
<td class="rouge-code"><pre><span class="o">&gt;</span> <span class="nv">$addPath</span> <span class="o">=</span> <span class="s1">'C:\TopSecret\Bin'</span>
<span class="o">&gt;</span> <span class="o">[</span>regex]::Escape<span class="o">(</span><span class="nv">$addPath</span><span class="o">)</span>
C:<span class="se">\\</span>TopSecret<span class="se">\\</span>Bin
</pre></td>
</tr></tbody></table></code></pre></div>        </div>
      </li>
    </ul>
  </li>
</ul>

<h1 id="wsl이-갑자기-안되는-문제-해결-2020-11-01">WSL이 갑자기 안되는 문제 해결 (2020-11-01)</h1>

<ul>
  <li>오랫동안 WSL을 안쓰다가 접속해보니 다음과 같은 문제로 안됨 (Windows Terminal / Ubuntu-20.04 로 접속)
    <div class="language-sh highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td>
<td class="rouge-code"><pre><span class="o">&gt;</span> 
가상 컴퓨터 플랫폼 Windows 기능을 사용하도록 설정하고 BIOS에서 가상화가 사용하도록 설정되어 있는지 확인하세요.
자세한 정보는 https://aka.ms/wsl2-install을 참조하세요

<span class="o">[</span>코드 4294967295로 프로세스 종료됨]
</pre></td>
</tr></tbody></table></code></pre></div>    </div>
  </li>
  <li>찾아보니 관련 내용이 있음
    <ul>
      <li>WSL 2가 version 2004 부터 Linux Kernel 업데이트를 윈도우즈 업데이트시에 seamless하게 하려고 함.</li>
      <li>일시적으로 전환 과정에서 Linux Kernel 수동 업데이트를 한번 해줘야함.</li>
      <li>관련 내용 : <a href="https://devblogs.microsoft.com/commandline/wsl2-will-be-generally-available-in-windows-10-version-2004/#temporary-experience-of-manually-installing-the-linux-kernel-in-windows-10-version-2004-and-windows-insiders-slow-ring">Temporary experience of manually installing the Linux kernel in Window 10</a>
</li>
      <li>위 내용에서 나온대로 <a href="https://aka.ms/wsl2-install">https://aka.ms/wsl2-install</a>로 접속해서…
        <ul>
          <li>
<code class="language-html highlighter-rouge">4단계 - Linux 커널 업데이트 패키지 다운로드</code>에서..</li>
          <li>
<code class="language-html highlighter-rouge">x64 머신용 최신 WSL2 Linux 커널 업데이트 패키지</code>를 클릭하면…</li>
          <li>
<code class="language-html highlighter-rouge">wsl-update_x64.msi</code>를 다운로드 받게된다.</li>
        </ul>
      </li>
      <li>이 번 한번 수동으로 이 <code class="language-html highlighter-rouge">.msi</code> 파일을 업데이트 해주면..
        <ul>
          <li>차후 windows update시에 자동으로 Linux Kernel도 업데이트 된다는 내용인 것 같다.</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>주의할 점은 <code class="language-html highlighter-rouge">wsl-update_x64.msi</code>파일을 실행해서 업데이트하고..
    <ul>
      <li>windows system을 <code class="language-html highlighter-rouge">다시 시작</code>해줘야 한다.</li>
      <li>
<code class="language-html highlighter-rouge">다시 시작</code>하지 않고 <code class="language-html highlighter-rouge">왜 안돼냐?</code> 하지 말자.</li>
    </ul>
  </li>
  <li>업데이트 후 처음으로 wsl 진입시에 프롬프트가 상당 시간동안 나오지 않는다.</li>
  <li>업데이트 후 처음 나온 메시지
    <div class="language-sh highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
</pre></td>
<td class="rouge-code"><pre>Welcome to Ubuntu 20.04 LTS <span class="o">(</span>GNU/Linux 4.19.128-microsoft-standard x86_64<span class="o">)</span>

 <span class="k">*</span> Documentation:  https://help.ubuntu.com
 <span class="k">*</span> Management:     https://landscape.canonical.com
 <span class="k">*</span> Support:        https://ubuntu.com/advantage

  System information as of Sun Nov  1 11:43:36 KST 2020

  System load:  0.0                Processes:             8
  Usage of /:   0.7% of 250.98GB   Users logged <span class="k">in</span>:       0
  Memory usage: 0%                 IPv4 address <span class="k">for </span>eth0: 모자이크..읍읍
  Swap usage:   0%

92 updates can be installed immediately.
38 of these updates are security updates.
To see these additional updates run: apt list <span class="nt">--upgradable</span>


The list of available updates is more than a week old.
To check <span class="k">for </span>new updates run: <span class="nb">sudo </span>apt update


This message is shown once once a day. To disable it please create the
/home/honggaruy/.hushlogin file.
내아이디@컴퓨터이름: /mnt/c/Users/내아이디 <span class="err">$</span>
    
</pre></td>
</tr></tbody></table></code></pre></div>    </div>
  </li>
</ul>

<h2 id="ubuntu-linux-최신버전으로-갱신-2020-11-01">Ubuntu Linux 최신버전으로 갱신 (2020-11-01)</h2>

<ul>
  <li>위에서 92개 업데이트가 있다길래 해주기로함.</li>
  <li>참고링크 : <a href="https://www.cyberciti.biz/faq/how-do-i-update-ubuntu-linux-softwares/">How do I update Ubuntu Linux software using command line ?</a>
    <ul>
      <li>
<code class="language-html highlighter-rouge">apt-get update</code> or <code class="language-html highlighter-rouge">apt update</code> : 인터넷에 접속해서 현재 최신버전의 인덱스 파일만 업데이트함. 패스워드 필요함</li>
      <li>
<code class="language-html highlighter-rouge">apt-get upgrade</code> or <code class="language-html highlighter-rouge">apt upgrade</code> : 업데이트된 인덱스 파일 기반으로 실제 업그레이드를 수행함. 앞에서 패스워드 넣어서 패스워드 입력불필요.</li>
    </ul>
  </li>
  <li>
<code class="language-html highlighter-rouge">apt update</code>와 <code class="language-html highlighter-rouge">apt upgrade</code>를 차례로 해주어야 함.</li>
</ul>

<h1 id="jekyll-serve-에러-2020-11-01">Jekyll serve 에러 (2020-11-01)</h1>

<ul>
  <li>오늘 왠일인지 여기저기서 서비스 에러가 속출한다.</li>
  <li>현재 개인위키 서비스를 로컬에서 확인시 <code class="language-html highlighter-rouge">bundle exec jekyll serve</code>로 실행하는데 다음과 같이 에러가 난다.</li>
  <li>분명 1시간전까지 잘 되었던것 같은데…
    <div class="language-sh highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
</pre></td>
<td class="rouge-code"><pre> Auto-regeneration: enabled <span class="k">for</span> <span class="s1">'D:/repository/honggaruy.github.io'</span>
Traceback <span class="o">(</span>most recent call last<span class="o">)</span>:
        24: from C:/tools/ruby27/bin/jekyll:23:in <span class="sb">`</span>&lt;main&gt;<span class="s1">'
        23: from C:/tools/ruby27/bin/jekyll:23:in `load'</span>
        22: from C:/tools/ruby27/lib/ruby/gems/2.7.0/gems/jekyll-4.1.1/exe/jekyll:15:in <span class="sb">`</span>&lt;top <span class="o">(</span>required<span class="o">)&gt;</span><span class="s1">'
        21: from C:/tools/ruby27/lib/ruby/gems/2.7.0/gems/mercenary-0.4.0/lib/mercenary.rb:21:in `program'</span>
        20: from C:/tools/ruby27/lib/ruby/gems/2.7.0/gems/mercenary-0.4.0/lib/mercenary/program.rb:44:in <span class="sb">`</span>go<span class="s1">'
        19: from C:/tools/ruby27/lib/ruby/gems/2.7.0/gems/mercenary-0.4.0/lib/mercenary/command.rb:221:in `execute'</span>
        18: from C:/tools/ruby27/lib/ruby/gems/2.7.0/gems/mercenary-0.4.0/lib/mercenary/command.rb:221:in <span class="sb">`</span>each<span class="s1">'
        17: from C:/tools/ruby27/lib/ruby/gems/2.7.0/gems/mercenary-0.4.0/lib/mercenary/command.rb:221:in `block in execute'</span>
        16: from C:/tools/ruby27/lib/ruby/gems/2.7.0/gems/jekyll-4.1.1/lib/jekyll/commands/serve.rb:86:in <span class="sb">`</span>block <span class="o">(</span>2 levels<span class="o">)</span> <span class="k">in </span>init_with_program<span class="s1">'
        15: from C:/tools/ruby27/lib/ruby/gems/2.7.0/gems/jekyll-4.1.1/lib/jekyll/command.rb:91:in `process_with_graceful_fail'</span>
        14: from C:/tools/ruby27/lib/ruby/gems/2.7.0/gems/jekyll-4.1.1/lib/jekyll/command.rb:91:in <span class="sb">`</span>each<span class="s1">'
        13: from C:/tools/ruby27/lib/ruby/gems/2.7.0/gems/jekyll-4.1.1/lib/jekyll/command.rb:91:in `block in process_with_graceful_fail'</span>
        12: from C:/tools/ruby27/lib/ruby/gems/2.7.0/gems/jekyll-4.1.1/lib/jekyll/commands/serve.rb:102:in <span class="sb">`</span>process<span class="s1">'
        11: from C:/tools/ruby27/lib/ruby/gems/2.7.0/gems/jekyll-4.1.1/lib/jekyll/commands/serve.rb:215:in `start_up_webrick'</span>
        10: from C:/tools/ruby27/lib/ruby/gems/2.7.0/gems/jekyll-4.1.1/lib/jekyll/commands/serve.rb:215:in <span class="sb">`</span>new<span class="s1">'
         9: from C:/tools/ruby27/lib/ruby/2.7.0/webrick/httpserver.rb:47:in `initialize'</span>
         8: from C:/tools/ruby27/lib/ruby/2.7.0/webrick/server.rb:108:in <span class="sb">`</span>initialize<span class="s1">'
         7: from C:/tools/ruby27/lib/ruby/2.7.0/webrick/server.rb:127:in `listen'</span>
         6: from C:/tools/ruby27/lib/ruby/2.7.0/webrick/utils.rb:65:in <span class="sb">`</span>create_listeners<span class="s1">'
         5: from C:/tools/ruby27/lib/ruby/2.7.0/socket.rb:763:in `tcp_server_sockets'</span>
         4: from C:/tools/ruby27/lib/ruby/2.7.0/socket.rb:227:in <span class="sb">`</span>foreach<span class="s1">'
         3: from C:/tools/ruby27/lib/ruby/2.7.0/socket.rb:227:in `each'</span>
         2: from C:/tools/ruby27/lib/ruby/2.7.0/socket.rb:765:in <span class="sb">`</span>block <span class="k">in </span>tcp_server_sockets<span class="s1">'
         1: from C:/tools/ruby27/lib/ruby/2.7.0/socket.rb:201:in `listen'</span>
C:/tools/ruby27/lib/ruby/2.7.0/socket.rb:201:in <span class="sb">`</span><span class="nb">bind</span><span class="s1">': Permission denied - bind(2) for 127.0.0.1:4000 (Errno::EACCES)
</span></pre></td>
</tr></tbody></table></code></pre></div>    </div>
  </li>
  <li>
<code class="language-html highlighter-rouge">bundle exec jekyll serve --port 5000</code>으로 명령을 바꿔 테스트 해봤는데..
    <ul>
      <li>.. 문제가 나오지 않는다. 결국 포트 바인딩이 문제</li>
    </ul>
  </li>
  <li>그렇다면, 현재 4000 포트가 busy해서 못쓴다는 얘긴데..
    <ul>
      <li>.. <code class="language-html highlighter-rouge">resmon</code>이나 <code class="language-html highlighter-rouge">netstat</code> 명령으로 검색해봤지만 localhost:4000 포트 쓰는 곳이 없었다..</li>
      <li>위에서 5000 포트로 바꿔서 resmon을 보면 <code class="language-html highlighter-rouge">네트워크 &gt; 수신 대기 포트</code>를 확인했을 때 ..
        <ul>
          <li>.. <code class="language-html highlighter-rouge">ruby.exe</code>가 5000번 포트를 점유하는 것이 확인된다.
<img src="/post-img/2020/week-44th-01.png" alt="resmon 캡춰그림">
</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>컴퓨터를 껐다가 저녁에 다시 켜서 port 4000으로 접속 해보니 잘된다..뭐가 문제였는지는 오리무중</li>
</ul>

<h2 id="jekyll-serve-기본-포트-설정을-바꾸는-법">jekyll serve 기본 포트 설정을 바꾸는 법</h2>

<ul>
  <li>또 위와 같은 문제가 생길 경우를 대비해 기본 설정포트를 바꾸는 법을 알아 보았다.</li>
  <li>위에서 적은 것과 같이 이렇게 명령줄에서 바로 바꿀 수도 있지만..
    <div class="language-sh highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
</pre></td>
<td class="rouge-code"><pre><span class="o">&gt;</span> bundle exe jekyll serve <span class="nt">--port</span> 4001
</pre></td>
</tr></tbody></table></code></pre></div>    </div>
  </li>
  <li>
<a href="https://jekyllrb-ko.github.io/docs/configuration/">Jekyll 환경설정</a> 링크를 보면 <code class="language-html highlighter-rouge">프로젝트 루트</code>에 위치한  <code class="language-html highlighter-rouge">_config.yml</code>에서도 할 수 있다.</li>
  <li>현재 port 기본값은 <a href="https://jekyllrb-ko.github.io/docs/configuration/default/">Jekyll 환경설정 기본값</a> 링크를 참조하면 된다.</li>
  <li>이렇게 추가하면 된다.
    <div class="language-yml highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td>
<td class="rouge-code"><pre><span class="c1"># Serving</span>
<span class="na">port</span><span class="pi">:</span> <span class="s">4001</span> 
</pre></td>
</tr></tbody></table></code></pre></div>    </div>
  </li>
</ul>

    </article>
    <script>
    ;(function() {
        var tags = document.querySelectorAll('.post-tag');
        if(tags == null || tags.length < 1) {
            return;
        }

        for (var i = 0; i < tags.length; i++) {
            var item = tags[i];
            var tagList = item.innerHTML.trim();

            if(/^\s*$/.test(tagList)) {
                continue;
            }
            tagList = tagList.split(/\s+/)
                .map(function(tag) {
                    return `<a href="/tag/#${tag}">#${tag}</a>`;
                })
                .join(' ');
            tags[i].innerHTML = tagList;
        }
        return;
    })();
    ;(function() {
        var post = document.querySelector('article.post-content');

        if(post == null) {
            return;
        }

        (function iterate_node(node) {

            if (/^(?:p|ul|h\d|table)$/i.test(node.tagName)) {

                node.innerHTML = link(node.innerHTML);

            } else { // Node.ELEMENT_NODE
                for (var i = 0; i < node.childNodes.length; i++) {
                    iterate_node(node.childNodes[i]);
                }
            }
        })(post);

        function link(content) {
            content = content.replace(/\\\[\[(.+?)\]\]/g, '\\[\\[$1\\]\\]');
            content = content.replace(/\[\[(.+?)\]\]\{(.+?)\}/g, '<a href="../$1">$2</a>');
            content = content.replace(/\[\[(.+?)\]\]/g, '<a href="../$1">$1</a>');
            content = content.replace(/\\\[\\\[(.+?)\\\]\\\]/g, '[[$1]]');
            return content;
        }

    })();
</script>

    
    <div class="post-comments">
    
    
        <script src="https://utteranc.es/client.js" repo="honggaruy/honggaruy.github.io" issue-term="pathname" label="Comment" theme="github-light" crossorigin="anonymous" async>
        </script>
    
    </div>



</div>

            </div>
        </div>
        <footer class="footer">
    <div>

    </div>
</footer>
    
</body>
</html>
